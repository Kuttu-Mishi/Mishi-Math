<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mishi Math - Your Learning Adventure</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        
        :root {
            --primary-color: #6A5ACD;
            --secondary-color: #FF6B6B;
            --accent-color: #4ECDC4;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, rgba(106, 90, 205, 0.1) 0%, rgba(255, 107, 107, 0.1) 100%);
        }

        .mishi-btn {
            background-color: var(--primary-color);
            color: white;
            transition: all 0.3s ease;
        }

        .mishi-btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-3px);
        }

        .problem-card {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .problem-card:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .feedback-correct {
            background-color: rgba(76, 175, 80, 0.1);
            border: 2px solid green;
        }

        .feedback-incorrect {
            background-color: rgba(244, 67, 54, 0.1);
            border: 2px solid red;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
    <header class="bg-white shadow-md p-4">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center">
                <img src="/api/placeholder/50/50" alt="Mishi Math Logo" class="w-12 h-12 mr-3 rounded-full">
                <h1 class="text-2xl font-bold text-purple-600">Mishi Math</h1>
            </div>
            <nav>
                <button id="profileBtn" class="mishi-btn px-4 py-2 rounded-full">
                    My Profile
                </button>
            </nav>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 flex-grow">
        <!-- Grade Selection -->
        <section id="gradeSelection">
            <h2 class="text-3xl font-bold text-center mb-8 text-purple-600">Choose Your Grade</h2>
            <div class="grid md:grid-cols-6 gap-4">
                <div class="grade-card bg-white rounded-xl shadow-lg p-4 text-center cursor-pointer hover:bg-purple-50 transition" data-grade="K">
                    <div class="text-4xl font-bold text-purple-600">K</div>
                    <div class="text-sm text-gray-500">Kindergarten</div>
                </div>
                <div class="grade-card bg-white rounded-xl shadow-lg p-4 text-center cursor-pointer hover:bg-purple-50 transition" data-grade="1">
                    <div class="text-4xl font-bold text-purple-600">1</div>
                    <div class="text-sm text-gray-500">First Grade</div>
                </div>
                <div class="grade-card bg-white rounded-xl shadow-lg p-4 text-center cursor-pointer hover:bg-purple-50 transition" data-grade="2">
                    <div class="text-4xl font-bold text-purple-600">2</div>
                    <div class="text-sm text-gray-500">Second Grade</div>
                </div>
                <div class="grade-card bg-white rounded-xl shadow-lg p-4 text-center cursor-pointer hover:bg-purple-50 transition" data-grade="3">
                    <div class="text-4xl font-bold text-purple-600">3</div>
                    <div class="text-sm text-gray-500">Third Grade</div>
                </div>
                <div class="grade-card bg-white rounded-xl shadow-lg p-4 text-center cursor-pointer hover:bg-purple-50 transition" data-grade="4">
                    <div class="text-4xl font-bold text-purple-600">4</div>
                    <div class="text-sm text-gray-500">Fourth Grade</div>
                </div>
                <div class="grade-card bg-white rounded-xl shadow-lg p-4 text-center cursor-pointer hover:bg-purple-50 transition" data-grade="5">
                    <div class="text-4xl font-bold text-purple-600">5</div>
                    <div class="text-sm text-gray-500">Fifth Grade</div>
                </div>
            </div>
        </section>

        <!-- Subject Selection (Hidden by Default) -->
        <section id="subjectSelection" class="hidden">
            <button id="backToGrades" class="mb-4 text-purple-600 hover:text-purple-800 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                Back to Grades
            </button>

            <h2 id="selectedGradeTitle" class="text-3xl font-bold mb-8 text-purple-600">Grade Subjects</h2>
            
            <div class="grid md:grid-cols-3 gap-6">
                <div class="subject-card bg-white rounded-xl shadow-lg p-6 text-center cursor-pointer" data-subject="counting">
                    <div class="text-5xl mb-4">üî¢</div>
                    <h3 class="text-xl font-semibold mb-2">Counting</h3>
                    <p class="text-gray-600">Learn number recognition</p>
                </div>
                <div class="subject-card bg-white rounded-xl shadow-lg p-6 text-center cursor-pointer" data-subject="addition">
                    <div class="text-5xl mb-4">‚ûï</div>
                    <h3 class="text-xl font-semibold mb-2">Addition</h3>
                    <p class="text-gray-600">Add numbers together</p>
                </div>
                <div class="subject-card bg-white rounded-xl shadow-lg p-6 text-center cursor-pointer" data-subject="subtraction">
                    <div class="text-5xl mb-4">‚ûñ</div>
                    <h3 class="text-xl font-semibold mb-2">Subtraction</h3>
                    <p class="text-gray-600">Subtract with ease</p>
                </div>
                <div class="subject-card bg-white rounded-xl shadow-lg p-6 text-center cursor-pointer" data-subject="multiplication">
                    <div class="text-5xl mb-4">‚úñÔ∏è</div>
                    <h3 class="text-xl font-semibold mb-2">Multiplication</h3>
                    <p class="text-gray-600">Master times tables</p>
                </div>
                <div class="subject-card bg-white rounded-xl shadow-lg p-6 text-center cursor-pointer" data-subject="division">
                    <div class="text-5xl mb-4">‚ûó</div>
                    <h3 class="text-xl font-semibold mb-2">Division</h3>
                    <p class="text-gray-600">Learn sharing and dividing</p>
                </div>
                <div class="subject-card bg-white rounded-xl shadow-lg p-6 text-center cursor-pointer" data-subject="algebra">
                    <div class="text-5xl mb-4">üìä</div>
                    <h3 class="text-xl font-semibold mb-2">Algebra</h3>
                    <p class="text-gray-600">Solve equations</p>
                </div>
            </div>
        </section>

        <!-- Practice Area (Hidden by Default) -->
        <section id="practiceArea" class="hidden">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 id="practiceTopic" class="text-3xl font-bold text-purple-600">Practice</h2>
                        <p id="practiceDescription" class="text-gray-600">Solve these problems!</p>
                    </div>
                    <div>
                        <span class="text-xl font-semibold">Score: </span>
                        <span id="scoreDisplay" class="text-xl font-bold text-purple-600">0/0</span>
                    </div>
                </div>

                <div id="problemsContainer" class="grid md:grid-cols-2 gap-6">
                    <!-- Problems will be dynamically generated here -->
                </div>

                <div class="mt-8 flex justify-center space-x-4">
                    <button id="checkAnswersBtn" class="mishi-btn px-6 py-3 rounded-full">
                        Check Answers
                    </button>
                    <button id="nextPracticeBtn" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-full hover:bg-gray-300">
                        Next Set
                    </button>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Math Problem Generator
        class MathProblemGenerator {
            constructor(grade, subject) {
                this.grade = parseInt(grade);
                this.subject = subject;
            }

            generateProblems() {
                switch(this.subject) {
                    case 'counting':
                        return this.generateCountingProblems();
                    case 'addition':
                        return this.generateAdditionProblems();
                    case 'subtraction':
                        return this.generateSubtractionProblems();
                    case 'multiplication':
                        return this.generateMultiplicationProblems();
                    case 'division':
                        return this.generateDivisionProblems();
                    case 'algebra':
                        return this.generateAlgebraProblems();
                    default:
                        return [];
                }
            }

            generateCountingProblems() {
                const problems = [];
                const maxNumber = this.getMaxNumberByGrade();
                
                for (let i = 0; i < 4; i++) {
                    const numbers = this.generateUniqueRandomNumbers(3, 1, maxNumber);
                    problems.push({
                        question: `Order these numbers from smallest to largest: ${numbers.join(', ')}`,
                        type: 'ordering',
                        answer: numbers.sort((a, b) => a - b).join(', ')
                    });
                }
                return problems;
            }

            generateAdditionProblems() {
                const problems = [];
                const maxNumber = this.getMaxNumberByGrade();
                
                for (let i = 0; i < 4; i++) {
                    const a = this.getRandomNumber(1, maxNumber);
                    const b = this.getRandomNumber(1, maxNumber);
                    problems.push({
                        question: `${a} + ${b} = `,
                        type: 'calculation',
                        answer: a + b
                    });
                }
                return problems;
            }

            generateSubtractionProblems() {
                const problems = [];
                const maxNumber = this.getMaxNumberByGrade();
                
                for (let i = 0; i < 4; i++) {
                    const a = this.getRandomNumber(maxNumber / 2, maxNumber);
                    const b = this.getRandomNumber(1, a);
                    problems.push({
                        question: `${a} - ${b} = `,
                        type: 'calculation',
                        answer: a - b
                    });
                }
                return problems;
            }

            generateMultiplicationProblems() {
                const problems = [];
                const maxNumber = this.getMaxNumberByGrade();
                
                for (let i = 0; i < 4; i++) {
                    const a = this.getRandomNumber(1, 12);
                    const b = this.getRandomNumber(1, 12);
                    problems.push({
                        question: `${a} √ó ${b} = `,
                        type: 'calculation',
                        answer: a * b
                    });
                }
                return problems;
            }

            generateDivisionProblems() {
                const problems = [];
                const maxNumber = this.getMaxNumberByGrade();
                
                for (let i = 0; i < 4; i++) {
                    const b = this.getRandomNumber(1, 12);
                    const a = b * this.getRandomNumber(1, 12);
                    problems.push({
                        question: `${a} √∑ ${b} = `,
                        type: 'calculation',
                        answer: a / b
                    });
                }
                return problems;
            }

            generateAlgebraProblems() {
                const problems = [];
                
                for (let i = 0; i < 4; i++) {
                    const x = this.getRandomNumber(1, 20);
                    const a = this.getRandomNumber(1, 10);
                    const b = this.getRandomNumber(1, 10);
                    
                    if (this.grade <= 3) {
                        // Simple missing number problems
                        problems.push({
                            question: `${a} + ‚ñ° = ${a + x}`,
                            type: 'missing_number',
                            answer: x
                        });
                    } else {
                        // More complex equation
                        problems.push({
                            question: `${a}x + ${b} = ${a * x + b}`,
                            type: 'equation',
                            answer: x
                        });
                    }
                }
                return problems;
            }

            getMaxNumberByGrade() {
                const maxNumbers = {
                    K: 10,
                    1: 20,
                    2: 50,
                    3: 100,
                    4: 1000,
                    5: 10000
                };
                return maxNumbers[this.grade] || 100;
            }

            getRandomNumber(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            generateUniqueRandomNumbers(count, min, max) {
                const numbers = new Set();
                while (numbers.size < count) {
                    numbers.add(this.getRandomNumber(min, max));
                }
                return Array.from(numbers);
            }
        }

        // Main Application Logic
        document.addEventListener('DOMContentLoaded', () => {
            let currentGrade = null;
            let currentSubject = null;
            let currentProblems = [];
            let score = 0;
            let totalQuestions = 0;

            // Grade Selection
            const gradeCards = document.querySelectorAll('.grade-card');
            const gradeSelection = document.getElementById('gradeSelection');
            const subjectSelection = document.getElementById('subjectSelection');
            const practiceArea = document.getElementById('practiceArea');
            const selectedGradeTitle = document.getElementById('selectedGradeTitle');
            const backToGradesBtn = document.getElementById('backToGrades');
            const problemsContainer = document.getElementById('problemsContainer');
            const checkAnswersBtn = document.getElementById('checkAnswersBtn');
            const nextPracticeBtn = document.getElementById('nextPracticeBtn');
            const practiceTopic = document.getElementById('practiceTopic');
            const practiceDescription = document.getElementById('practiceDescription');
            const scoreDisplay = document.getElementById('scoreDisplay');

            // Grade Selection Event Listeners
            gradeCards.forEach(card => {
                card.addEventListener('click', () => {
                    currentGrade = card.getAttribute('data-grade');
                    selectedGradeTitle.textContent = `Grade ${currentGrade} Subjects`;
                    gradeSelection.classList.add('hidden');
                    subjectSelection.classList.remove('hidden');
                });
            });

            // Subject Selection Event Listeners
            const subjectCards = document.querySelectorAll('.subject-card');
            subjectCards.forEach(card => {
                card.addEventListener('click', () => {
                    currentSubject = card.getAttribute('data-subject');
                    
                    // Update practice area header
                    practiceTopic.textContent = `${currentSubject.charAt(0).toUpperCase() + currentSubject.slice(1)} Practice`;
                    practiceDescription.textContent = `Solve these ${currentSubject} problems for Grade ${currentGrade}`;
                    
                    // Generate problems
                    const problemGenerator = new MathProblemGenerator(currentGrade, currentSubject);
                    currentProblems = problemGenerator.generateProblems();
                    
                    // Render problems
                    renderProblems();
                    
                    // Reset score
                    score = 0;
                    totalQuestions = currentProblems.length;
                    scoreDisplay.textContent = `0/${totalQuestions}`;
                    
                    // Show practice area
                    subjectSelection.classList.add('hidden');
                    practiceArea.classList.remove('hidden');
                });
            });

            // Render Problems Function
            function renderProblems() {
                problemsContainer.innerHTML = '';
                currentProblems.forEach((problem, index) => {
                    const problemCard = document.createElement('div');
                    problemCard.classList.add('problem-card', 'p-4', 'bg-gray-100', 'rounded-lg');
                    
                    // Question
                    const questionEl = document.createElement('div');
                    questionEl.classList.add('text-xl', 'mb-4', 'font-semibold');
                    questionEl.textContent = problem.question;
                    
                    // Answer Input
                    const answerInput = document.createElement('input');
                    answerInput.setAttribute('type', 'text');
                    answerInput.classList.add('w-full', 'p-2', 'border', 'rounded', 'mt-2');
                    answerInput.setAttribute('data-problem-index', index);
                    
                    // Feedback Area
                    const feedbackEl = document.createElement('div');
                    feedbackEl.classList.add('mt-2', 'text-sm', 'hidden');
                    
                    problemCard.appendChild(questionEl);
                    problemCard.appendChild(answerInput);
                    problemCard.appendChild(feedbackEl);
                    
                    problemsContainer.appendChild(problemCard);
                });
            }

            // Check Answers
            checkAnswersBtn.addEventListener('click', () => {
                let currentScore = 0;
                const inputs = problemsContainer.querySelectorAll('input');
                
                inputs.forEach((input, index) => {
                    const problem = currentProblems[index];
                    const feedbackEl = input.nextElementSibling;
                    const userAnswer = input.value.trim();
                    
                    // Convert to number for calculation problems
                    const correctAnswer = problem.answer;
                    let isCorrect = false;
                    
                    // Different checking for different problem types
                    switch(problem.type) {
                        case 'calculation':
                            isCorrect = parseFloat(userAnswer) === correctAnswer;
                            break;
                        case 'ordering':
                            isCorrect = userAnswer === correctAnswer;
                            break;
                        case 'missing_number':
                        case 'equation':
                            isCorrect = parseInt(userAnswer) === correctAnswer;
                            break;
                    }
                    
                    // Update feedback
                    feedbackEl.classList.remove('hidden');
                    if (isCorrect) {
                        currentScore++;
                        feedbackEl.textContent = 'Correct! üéâ';
                        feedbackEl.classList.add('text-green-600', 'feedback-correct');
                        input.disabled = true;
                    } else {
                        feedbackEl.textContent = `Incorrect. Correct answer: ${correctAnswer}`;
                        feedbackEl.classList.add('text-red-600', 'feedback-incorrect');
                    }
                });
                
                // Update total score
                score = currentScore;
                scoreDisplay.textContent = `${score}/${totalQuestions}`;
            });

            // Next Practice Set
            nextPracticeBtn.addEventListener('click', () => {
                // Regenerate problems
                const problemGenerator = new MathProblemGenerator(currentGrade, currentSubject);
                currentProblems = problemGenerator.generateProblems();
                
                // Render new problems
                renderProblems();
                
                // Reset score
                score = 0;
                totalQuestions = currentProblems.length;
                scoreDisplay.textContent = `0/${totalQuestions}`;
            });

            // Back to Grades
            backToGradesBtn.addEventListener('click', () => {
                subjectSelection.classList.add('hidden');
                gradeSelection.classList.remove('hidden');
            });
        });
    </script>
</body>
</html>